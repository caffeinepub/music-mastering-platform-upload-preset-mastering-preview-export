{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-12T09:58:17.195Z",
  "summary": "Implemented a new PWA install entry point component and a visibility hook that hides the button when the app is considered installed and reacts to the `appinstalled` event. However, the current logic hides the entry point after a dismissed install prompt (and also when installation is not available), which conflicts with REQ-22 acceptance criteria.",
  "missing_requirements": [
    {
      "id": "REQ-22",
      "requirement": "If the user dismisses the install prompt or installation is not available, the install/download entry point remains visible and usable (no premature hiding).",
      "reason": "`canInstall` is computed as `!isInstalled && !!deferredPrompt`, so when the user dismisses the prompt (or when `beforeinstallprompt` never fires), `deferredPrompt` is `null` and the component returns `null`, effectively hiding the entry point instead of keeping it visible/usable.",
      "evidence": [
        "frontend/src/hooks/usePwaInstallVisibility.ts",
        "frontend/src/components/PwaInstallEntryPoint.tsx"
      ]
    }
  ],
  "hallucinated_features": [],
  "confidence": 0.74,
  "changed_files": [
    "frontend-file-summaries.txt",
    "frontend/src/App.tsx",
    "frontend/src/components/PwaInstallEntryPoint.tsx",
    "frontend/src/hooks/usePwaInstallVisibility.ts",
    "frontend/src/i18n/translations.ts",
    "project_state.json"
  ]
}